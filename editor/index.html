<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>kosmos-gen Editor</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <nav id="tabs">
      <button class="tab active" data-tab="spines">1. Spines</button>
      <button class="tab" data-tab="noise">2. Noise</button>
      <button class="tab" data-tab="hydrology" disabled>3. Hydrology</button>
      <button class="tab" data-tab="climate" disabled>4. Climate</button>
      <button class="tab" data-tab="zones" disabled>5. Zones</button>
      <button class="tab" data-tab="content" disabled>6. Content</button>
    </nav>
    
    <main id="workspace">
      <canvas id="canvas"></canvas>
      <aside id="panel">
        <div id="properties">
          <h3>Properties</h3>
          <div id="no-selection">
            <p>Select a vertex or half-cell to edit its properties</p>
          </div>
          <div id="vertex-props" style="display: none;">
            <label>
              Elevation:
              <input type="range" id="prop-elevation" min="0" max="1" step="0.05" value="0.7">
              <span id="prop-elevation-value">0.7</span>
            </label>
            <label>
              Influence:
              <input type="range" id="prop-influence" min="5" max="200" step="5" value="30">
              <span id="prop-influence-value">30</span>
            </label>
          </div>
          <div id="halfcell-props" style="display: none;">
            <label>
              Profile:
              <select id="prop-profile">
                <option value="ramp">Ramp</option>
                <option value="plateau">Plateau</option>
                <option value="bowl">Bowl</option>
                <option value="shield">Shield</option>
              </select>
            </label>
            <label>
              Falloff Curve:
              <input type="range" id="prop-falloff" min="0" max="1" step="0.1" value="0.5">
              <span id="prop-falloff-value">0.50</span>
            </label>
            <!-- Per-cell noise overrides (shown in Tab 2) -->
            <div id="halfcell-noise-props" style="display: none;">
              <hr class="prop-divider">
              <label>
                Roughness:
                <input type="range" id="prop-cell-roughness" min="0" max="1" step="0.05" value="0.3">
                <span id="prop-cell-roughness-value">0.30</span>
              </label>
              <label>
                Feature Scale:
                <input type="range" id="prop-cell-feature-scale" min="0.05" max="0.5" step="0.05" value="0.2">
                <span id="prop-cell-feature-scale-value">0.20</span>
              </label>
              <button id="reset-cell-noise" class="prop-button">Reset to Default</button>
            </div>
          </div>
        </div>

        <!-- Global Noise Settings (Tab 2 only) -->
        <div id="noise-settings" style="display: none;">
          <h3>Domain Warp</h3>
          <label class="toggle-label">
            <input type="checkbox" id="warp-enabled" checked>
            Enable Warp
          </label>
          <label>
            Warp Strength:
            <input type="range" id="warp-strength" min="0" max="0.15" step="0.005" value="0.05">
            <span id="warp-strength-value">0.05</span>
          </label>
          <label>
            Warp Scale:
            <input type="range" id="warp-scale" min="0.005" max="0.05" step="0.005" value="0.015">
            <span id="warp-scale-value">0.015</span>
          </label>

          <h3>Default Cell Noise</h3>
          <label>
            Roughness:
            <input type="range" id="default-roughness" min="0" max="1" step="0.05" value="0.3">
            <span id="default-roughness-value">0.30</span>
          </label>
          <label>
            Feature Scale:
            <input type="range" id="default-feature-scale" min="0.05" max="0.5" step="0.05" value="0.2">
            <span id="default-feature-scale-value">0.20</span>
          </label>
        </div>
      </aside>
    </main>
    
    <footer id="toolbar">
      <div id="tools">
        <button id="tool-select" class="tool active" title="Select vertices or half-cells (drag to move)">
          <span class="icon">â¬š</span> Select
        </button>
        <button id="tool-draw" class="tool" title="Draw spine (click to add points, double-click or right-click to finish, Esc to cancel)">
          <span class="icon">âœŽ</span> Draw
        </button>
        <button id="tool-delete" class="tool" title="Delete spine (click on spine to remove)">
          <span class="icon">âœ•</span> Delete
        </button>
        <span class="tool-separator"></span>
        <button id="clear-canvas" class="tool-action" title="Clear all spines">
          <span class="icon">ðŸ—‘</span> Clear
        </button>
      </div>
      <div id="view-controls">
        <label><input type="checkbox" id="show-elevation" checked> Elevation</label>
        <label><input type="checkbox" id="show-contours"> Contours</label>
        <label>Seed: <input type="number" id="seed" value="42"></label>
        <button id="randomize">ðŸŽ²</button>
      </div>
    </footer>
  </div>
  
  <script type="module" src="app.js"></script>
</body>
</html>
